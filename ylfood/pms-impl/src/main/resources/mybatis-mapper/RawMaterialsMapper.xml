<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.spfood.pms.intf.domain.RawMaterials" >
  <resultMap id="BaseResultMap" type="com.spfood.pms.intf.domain.RawMaterials" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="id" property="id" jdbcType="BIGINT" />
    <result column="raw_materials_code" property="rawMaterialsCode" jdbcType="VARCHAR" />
    <result column="category_code" property="categoryCode" jdbcType="VARCHAR" />
    <result column="raw_materials_gs1_code" property="rawMaterialsGs1Code" jdbcType="VARCHAR" />
    <result column="raw_materials_name" property="rawMaterialsName" jdbcType="VARCHAR" />
    <result column="raw_materials_show_name" property="rawMaterialsShowName" jdbcType="VARCHAR" />
    <result column="raw_materials_buy_unit_code" property="rawMaterialsBuyUnitCode" jdbcType="VARCHAR" />
    <result column="raw_materials_buy_unit_name" property="rawMaterialsBuyUnitName" jdbcType="VARCHAR" />
    <result column="raw_materials_terminal" property="rawMaterialsTerminal" jdbcType="DECIMAL" />
    <result column="raw_materials_status" property="rawMaterialsStatus" jdbcType="INTEGER" />
    <result column="sale_flag" property="saleFlag" jdbcType="INTEGER" />
    <result column="raw_materials_type" property="rawMaterialsType" jdbcType="INTEGER" />
    <result column="raw_materials_specification" property="rawMaterialsSpecification" jdbcType="VARCHAR" />
    <result column="raw_materials_specification_value" property="rawMaterialsSpecificationValue" jdbcType="REAL" />
    <result column="raw_materials_specification_unit_first" property="rawMaterialsSpecificationUnitFirst" jdbcType="VARCHAR" />
    <result column="raw_materials_specification_unit_first_value" property="rawMaterialsSpecificationUnitFirstValue" jdbcType="VARCHAR" />
    <result column="raw_materials_specification_unit_second" property="rawMaterialsSpecificationUnitSecond" jdbcType="VARCHAR" />
    <result column="raw_materials_specification_unit_second_value" property="rawMaterialsSpecificationUnitSecondValue" jdbcType="VARCHAR" />
    <result column="raw_materials_temperature_zone_name" property="rawMaterialsTemperatureZoneName" jdbcType="VARCHAR" />
    <result column="raw_materials_temperature_zone_code" property="rawMaterialsTemperatureZoneCode" jdbcType="VARCHAR" />
    <result column="tax_rate_name" property="taxRateName" jdbcType="VARCHAR" />
    <result column="tax_rate_value" property="taxRateValue" jdbcType="VARCHAR" />
    <result column="shelf_life" property="shelfLife" jdbcType="INTEGER" />
    <result column="shelf_life_name" property="shelfLifeName" jdbcType="VARCHAR" />
    <result column="shelf_life_value" property="shelfLifeValue" jdbcType="VARCHAR" />
    <result column="sale_date" property="saleDate" jdbcType="INTEGER" />
    <result column="sale_date_name" property="saleDateName" jdbcType="VARCHAR" />
    <result column="sale_date_value" property="saleDateValue" jdbcType="VARCHAR" />
    <result column="create_date" property="createDate" jdbcType="TIMESTAMP" />
    <result column="create_user" property="createUser" jdbcType="VARCHAR" />
    <result column="last_update_date" property="lastUpdateDate" jdbcType="TIMESTAMP" />
    <result column="last_update_user" property="lastUpdateUser" jdbcType="VARCHAR" />
    
		<collection property="rawMaterialsProperties"
			ofType="com.spfood.pms.intf.domain.RawMaterialsProperty" column="raw_materials_code">
			<id column="property_id" property="id" jdbcType="BIGINT" />
			<result column="property_raw_materials_code" property="rawMaterialsCode"
				jdbcType="VARCHAR" />
			<result column="raw_materials_property_name" property="rawMaterialsPropertyName"
				jdbcType="VARCHAR" />
			<result column="raw_materials_property_value" property="rawMaterialsPropertyValue"
				jdbcType="VARCHAR" />
			<result column="customer_define_flag" property="customerDefineFlag" jdbcType="INTEGER" />
		</collection>
		<collection property="rawMaterialsPackUnit"
			ofType="com.spfood.pms.intf.domain.RawMaterialsPackUnit" resultMap="PackUnitMap"/>
		<collection property="category"
			ofType="com.spfood.pms.intf.domain.ProductCategory" column="category_code">
			<id column="RawMaterialsCategory_id" property="id" jdbcType="BIGINT" />
		    <result column="category_code" property="categoryCode" jdbcType="VARCHAR" />
		    <result column="category_name" property="categoryName" jdbcType="VARCHAR" />
		    <result column="category_another_name" property="categoryAnotherName" jdbcType="VARCHAR"/>
		    <result column="parent_category_code" property="parentCategory.categoryCode" jdbcType="VARCHAR" />
		    <result column="parent_category_name" property="parentCategory.categoryName" jdbcType="VARCHAR" />
		    <result column="category_comment" property="categoryComment" jdbcType="VARCHAR" />
		</collection>
		
  </resultMap>
	 <resultMap id="PackUnitMap" type="com.spfood.pms.intf.domain.RawMaterialsPackUnit">
			<id column="pack_unit_id" property="id" jdbcType="BIGINT" />
			<result column="pack_unit_raw_materials_code" property="rawMaterialsCode" jdbcType="VARCHAR" />
			<result column="unit_name" property="unitName" jdbcType="VARCHAR" />
			<result column="unit_code" property="unitCode" jdbcType="VARCHAR" />
			<result column="unit_value" property="unitValue" jdbcType="INTEGER" />
	 </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    id, raw_materials_code, category_code, raw_materials_gs1_code, raw_materials_name, 
    raw_materials_show_name, raw_materials_buy_unit_code, raw_materials_buy_unit_name, 
    raw_materials_terminal, raw_materials_status, sale_flag, raw_materials_type, raw_materials_specification, 
    raw_materials_specification_value, raw_materials_specification_unit_first, raw_materials_specification_unit_first_value, 
    raw_materials_specification_unit_second, raw_materials_specification_unit_second_value, 
    raw_materials_temperature_zone_name, raw_materials_temperature_zone_code, tax_rate_name, 
    tax_rate_value, shelf_life, shelf_life_name, shelf_life_value, sale_date, sale_date_name, sale_date_value, 
    create_date, create_user, last_update_date, 
    last_update_user
  </sql>
  <sql id="Base_Where_Case" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <where >
      <if test="id != null" >
         AND id = #{id,jdbcType=BIGINT}
      </if>
      <if test="rawMaterialsCode != null" >
         AND raw_materials_code = #{rawMaterialsCode,jdbcType=VARCHAR}
      </if>
      <if test="categoryCode != null" >
         AND category_code = #{categoryCode,jdbcType=VARCHAR}
      </if>
      <if test="rawMaterialsGs1Code != null" >
         AND raw_materials_gs1_code = #{rawMaterialsGs1Code,jdbcType=VARCHAR}
      </if>
      <if test="rawMaterialsName != null" >
         AND raw_materials_name = #{rawMaterialsName,jdbcType=VARCHAR}
      </if>
      <if test="rawMaterialsShowName != null" >
         AND raw_materials_show_name = #{rawMaterialsShowName,jdbcType=VARCHAR}
      </if>
      <if test="rawMaterialsBuyUnitCode != null" >
         AND raw_materials_buy_unit_code = #{rawMaterialsBuyUnitCode,jdbcType=VARCHAR}
      </if>
      <if test="rawMaterialsBuyUnitName != null" >
         AND raw_materials_buy_unit_name = #{rawMaterialsBuyUnitName,jdbcType=VARCHAR}
      </if>
      <if test="rawMaterialsTerminal != null" >
         AND raw_materials_terminal = #{rawMaterialsTerminal,jdbcType=DECIMAL}
      </if>
      <if test="rawMaterialsStatus != null" >
         AND raw_materials_status = #{rawMaterialsStatus,jdbcType=INTEGER}
      </if>
      <if test="saleFlag != null" >
         AND sale_flag = #{saleFlag,jdbcType=INTEGER}
      </if>
      <if test="rawMaterialsType != null" >
         AND raw_materials_type = #{rawMaterialsType,jdbcType=INTEGER}
      </if>
      <if test="rawMaterialsSpecification != null" >
         AND raw_materials_specification = #{rawMaterialsSpecification,jdbcType=VARCHAR}
      </if>
      <if test="rawMaterialsSpecificationValue != null" >
         AND raw_materials_specification_value = #{rawMaterialsSpecificationValue,jdbcType=REAL}
      </if>
      <if test="rawMaterialsSpecificationUnitFirst != null" >
         AND raw_materials_specification_unit_first = #{rawMaterialsSpecificationUnitFirst,jdbcType=VARCHAR}
      </if>
      <if test="rawMaterialsSpecificationUnitFirstValue != null" >
         AND raw_materials_specification_unit_first_value = #{rawMaterialsSpecificationUnitFirstValue,jdbcType=VARCHAR}
      </if>
      <if test="rawMaterialsSpecificationUnitSecond != null" >
         AND raw_materials_specification_unit_second = #{rawMaterialsSpecificationUnitSecond,jdbcType=VARCHAR}
      </if>
      <if test="rawMaterialsSpecificationUnitSecondValue != null" >
         AND raw_materials_specification_unit_second_value = #{rawMaterialsSpecificationUnitSecondValue,jdbcType=VARCHAR}
      </if>
      <if test="rawMaterialsTemperatureZoneName != null" >
         AND raw_materials_temperature_zone_name = #{rawMaterialsTemperatureZoneName,jdbcType=VARCHAR}
      </if>
      <if test="rawMaterialsTemperatureZoneCode != null" >
         AND raw_materials_temperature_zone_code = #{rawMaterialsTemperatureZoneCode,jdbcType=VARCHAR}
      </if>
      <if test="taxRateName != null" >
         AND tax_rate_name = #{taxRateName,jdbcType=VARCHAR}
      </if>
      <if test="taxRateValue != null" >
         AND tax_rate_value = #{taxRateValue,jdbcType=VARCHAR}
      </if>
      <if test="shelfLife != null" >
         AND shelf_life = #{shelfLife,jdbcType=INTEGER}
      </if>
      <if test="saleDate != null" >
         AND sale_date = #{saleDate,jdbcType=INTEGER}
      </if>
      <if test="createDate != null" >
         AND create_date = #{createDate,jdbcType=TIMESTAMP}
      </if>
      <if test="createUser != null" >
         AND create_user = #{createUser,jdbcType=VARCHAR}
      </if>
      <if test="lastUpdateDate != null" >
         AND last_update_date = #{lastUpdateDate,jdbcType=TIMESTAMP}
      </if>
      <if test="lastUpdateUser != null" >
         AND last_update_user = #{lastUpdateUser,jdbcType=VARCHAR}
      </if>
      <if test="shelfLifeName != null" >
         AND shelf_life_name = #{shelfLifeName,jdbcType=VARBINARY}
      </if>
      <if test="shelfLifeValue != null" >
         AND shelf_life_value = #{shelfLifeValue,jdbcType=VARBINARY}
      </if>
      <if test="saleDateName != null" >
         AND sale_date_name = #{saleDateName,jdbcType=VARBINARY}
      </if>
      <if test="saleDateValue != null" >
         AND sale_date_value = #{saleDateValue,jdbcType=VARBINARY}
      </if>
    </where>
  </sql>

	<sql id="Casecade_Where_Case">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		<where>
			<if test="id != null">
				AND rawMaterials.id = #{id,jdbcType=BIGINT}
			</if>
			<if test="rawMaterialsCode != null">
				AND rawMaterials.raw_materials_code =
				#{rawMaterialsCode,jdbcType=VARCHAR}
			</if>
			<if test="categoryCode != null">
				AND category_code = #{categoryCode,jdbcType=VARCHAR}
			</if>
			<if test="rawMaterialsGs1Code != null">
				AND raw_materials_gs1_code = #{rawMaterialsGs1Code,jdbcType=VARCHAR}
			</if>
			<if test="rawMaterialsName != null">
				AND raw_materials_name = #{rawMaterialsName,jdbcType=VARCHAR}
			</if>
			<if test="rawMaterialsShowName != null">
				AND raw_materials_show_name =
				#{rawMaterialsShowName,jdbcType=VARCHAR}
			</if>
			<if test="rawMaterialsTerminal != null">
				AND raw_materials_terminal =
				#{rawMaterialsTerminal,jdbcType=DECIMAL}
			</if>
			<if test="rawMaterialsStatus != null">
				AND raw_materials_status = #{rawMaterialsStatus,jdbcType=INTEGER}
			</if>
			<if test="saleFlag != null">
				AND sale_flag = #{saleFlag,jdbcType=INTEGER}
			</if>
			<if test="rawMaterialsType != null">
				AND raw_materials_type = #{rawMaterialsType,jdbcType=INTEGER}
			</if>
			<if test="propertySearchCriteria != null">
			and property.raw_materials_property_name = #{propertySearchCriteria.rawMaterialsPropertyName}
			and	property.raw_materials_property_value= #{propertySearchCriteria.rawMaterialsPropertyValue}
		</if>
		</where>
	</sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="com.spfood.pms.intf.domain.RawMaterials">
      
      select 
      <include refid="Base_Column_List" />
    from pms_raw_materials
    where id = #{id,jdbcType=BIGINT}
  </select>

	<!-- 分页查询基础信息开始 -->
	<select id="selectCount" resultType="java.lang.Long"
		parameterType="com.spfood.pms.intf.domain.RawMaterials">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		select count(DISTINCT rawMaterials.id)
		from pms_raw_materials rawMaterials
		left join
		pms_raw_materials_property property
		on rawMaterials.raw_materials_code =
		property.raw_materials_code
		left join pms_product_category 
		on rawMaterials.category_code = pms_product_category.category_code 
		where 1= 1 
		<if test="categoryCode != null">
			and rawMaterials.category_code like #{categoryCode,jdbcType=VARCHAR} '%'
		</if>
		<if test="rawMaterialsCode != null">
			and rawMaterials.raw_materials_code like #{rawMaterialsCode,jdbcType=VARCHAR}
		</if>
		<if test="rawMaterialsBuyUnitCode == 'true'">
			and rawMaterials.raw_materials_buy_unit_code is not null
		</if>
		<if test="rawMaterialsBuyUnitCode == 'false'">
			and rawMaterials.raw_materials_buy_unit_code is null
		</if>
		<if test="rawMaterialsName != null">
			and rawMaterials.raw_materials_name like #{rawMaterialsName,jdbcType=VARCHAR}
		</if>
		<if test="rawMaterialsType != null">
			and rawMaterials.raw_materials_type = #{rawMaterialsType,jdbcType=VARCHAR}
		</if>
		<if test="saleFlag != null">
			and rawMaterials.sale_flag = #{saleFlag,jdbcType=VARCHAR}
		</if>
		<if test="category != null and category.categoryName != null">
			and pms_product_category.category_name like #{category.categoryName,jdbcType=VARCHAR}
		</if>
		<if test="rawMaterialsGs1Code != null">
			and rawMaterials.raw_materials_gs1_code like #{rawMaterialsGs1Code,jdbcType=VARCHAR}
		</if>
		<if test="rawMaterialsStatus != null">
			and rawMaterials.raw_materials_status = #{rawMaterialsStatus,jdbcType=VARCHAR}
		</if>
		<if test="rawMaterialsTemperatureZoneCode != null">
			and rawMaterials.raw_materials_temperature_zone_code = #{rawMaterialsTemperatureZoneCode,jdbcType=VARCHAR}
		</if>
		<if test="propertySearchCriteria != null">
			and property.raw_materials_property_name = #{propertySearchCriteria.rawMaterialsPropertyName}
			and	property.raw_materials_property_value= #{propertySearchCriteria.rawMaterialsPropertyValue}
		</if>
	</select>


	<select id="selectBase" resultType="com.spfood.pms.intf.domain.RawMaterials"
		parameterType="com.spfood.pms.intf.domain.RawMaterials">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		select DISTINCT rawMaterials.id
		from pms_raw_materials rawMaterials
		left join
		pms_raw_materials_property property
		on rawMaterials.raw_materials_code = property.raw_materials_code
		left join pms_product_category 
		on rawMaterials.category_code = pms_product_category.category_code 
		where 1=1 
		<if test="categoryCode != null">
			and rawMaterials.category_code like #{categoryCode,jdbcType=VARCHAR} '%'
		</if>
		<if test="rawMaterialsCode != null">
			and rawMaterials.raw_materials_code like #{rawMaterialsCode,jdbcType=VARCHAR}
		</if>
		<if test="rawMaterialsBuyUnitCode == 'true'">
			and rawMaterials.raw_materials_buy_unit_code is not null
		</if>
		<if test="rawMaterialsBuyUnitCode == 'false'">
			and rawMaterials.raw_materials_buy_unit_code is null
		</if>
		<if test="rawMaterialsName != null">
			and rawMaterials.raw_materials_name like #{rawMaterialsName,jdbcType=VARCHAR}
		</if>
		<if test="rawMaterialsType != null">
			and rawMaterials.raw_materials_type = #{rawMaterialsType,jdbcType=VARCHAR}
		</if>
		<if test="saleFlag != null">
			and rawMaterials.sale_flag = #{saleFlag,jdbcType=VARCHAR}
		</if>
		<if test="category != null and category.categoryName != null">
			and pms_product_category.category_name like #{category.categoryName,jdbcType=VARCHAR}
		</if>
		<if test="rawMaterialsGs1Code != null">
			and rawMaterials.raw_materials_gs1_code like #{rawMaterialsGs1Code,jdbcType=VARCHAR}
		</if>
		<if test="rawMaterialsStatus != null">
			and rawMaterials.raw_materials_status = #{rawMaterialsStatus,jdbcType=VARCHAR}
		</if>
		<if test="rawMaterialsTemperatureZoneCode != null">
			and rawMaterials.raw_materials_temperature_zone_code = #{rawMaterialsTemperatureZoneCode,jdbcType=VARCHAR}
		</if>
		<if test="propertySearchCriteria != null">
			and property.raw_materials_property_name = #{propertySearchCriteria.rawMaterialsPropertyName}
			and	property.raw_materials_property_value= #{propertySearchCriteria.rawMaterialsPropertyValue}
		</if>
		order by rawMaterials.id desc
	</select>
	<!-- 分页查询基础信息结束 -->

	<select id="select" resultMap="BaseResultMap"
		parameterType="com.spfood.pms.intf.domain.RawMaterials">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		SELECT
			rawMaterials.*, raw_materials_property_name,
			raw_materials_property_value,
			property.id AS property_id,
			property.raw_materials_code property_raw_materials_code,
			property.customer_define_flag
		FROM
			pms_raw_materials rawMaterials
		LEFT JOIN pms_raw_materials_property property ON rawMaterials.raw_materials_code = property.raw_materials_code
		WHERE
			rawMaterials.id IN (
				SELECT
					rawMaterials.id
				FROM
					pms_raw_materials rawMaterials
				LEFT JOIN pms_raw_materials_property property ON rawMaterials.raw_materials_code = property.raw_materials_code
				<include refid="Casecade_Where_Case" />
				ORDER BY
					rawMaterials.create_date DESC
		)
		ORDER BY
			rawMaterials.create_date DESC
	</select>
	
		<select id="selectByRawMaterialsCode" resultMap="BaseResultMap"
		parameterType="com.spfood.pms.intf.domain.RawMaterials">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		SELECT
			rawMaterials.*
		FROM
			pms_raw_materials rawMaterials
		WHERE
			raw_materials_code = #{rawMaterialsCode,jdbcType=VARCHAR}
	</select>
	<select id="selectGS1IsExist" resultType="java.lang.Boolean" parameterType="com.spfood.pms.intf.domain.RawMaterials">
	      select CASE when count(id)>0 then false else true end as checkResult 
       from pms_raw_materials where raw_materials_gs1_code = #{rawMaterialsGs1Code,jdbcType=VARCHAR}
       <if test="id != null" >
          and id != #{id,jdbcType=BIGINT}
      </if>
	</select>
	<select id="selectListByIds" resultMap="BaseResultMap"
		parameterType="java.util.List">
		
		select rawMaterials.*,pms_product_category.category_name,
		raw_materials_property_name, raw_materials_property_value,raw_materials_buy_unit_name,raw_materials_buy_unit_code,
		property.id as property_id, property.raw_materials_code property_raw_materials_code,
		property.customer_define_flag
		from pms_raw_materials
		rawMaterials
		 
		left join
		pms_raw_materials_property property
		on
		rawMaterials.raw_materials_code =
		property.raw_materials_code
		LEFT JOIN pms_product_category
		ON rawMaterials.category_code = pms_product_category.category_code
		where rawMaterials.id in

		<foreach item="item" index="index" collection="list" open="("
			separator="," close=")">
			#{item}
		</foreach>
		order by rawMaterials.create_date desc
	</select>
	
	<!-- 可以返回二级品类名和编码 -->
	<select id="selectListByIdsSecond" resultMap="BaseResultMap"
		parameterType="java.util.List">
		
		SELECT
			rawMaterials.*, category.category_name parent_category_name,
			pms_product_category.category_name,
			pms_product_category.parent_category_code,
			categoryOne.category_name AS category_another_name,
			raw_materials_property_name,
			raw_materials_property_value,
			raw_materials_buy_unit_name,
			raw_materials_buy_unit_code,
			property.id AS property_id,
			property.raw_materials_code property_raw_materials_code,
			property.customer_define_flag
		FROM
			pms_raw_materials rawMaterials
		LEFT JOIN pms_raw_materials_property property ON rawMaterials.raw_materials_code = property.raw_materials_code
		LEFT JOIN pms_product_category ON rawMaterials.category_code = pms_product_category.category_code
		JOIN pms_product_category category ON pms_product_category.parent_category_code = category.category_code
		JOIN pms_product_category categoryOne ON categoryOne.category_code = LEFT (rawMaterials.category_code, 2)
		WHERE
			rawMaterials.id IN
		<foreach item="item" index="index" collection="list" open="("
			separator="," close=")">
			#{item}
		</foreach>
		order by rawMaterials.create_date desc
	</select>

	<insert id="insert" parameterType="com.spfood.pms.intf.domain.RawMaterials"
	        useGeneratedKeys="true" keyProperty="id">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		INSERT INTO pms_raw_materials (
			raw_materials_code,
			category_code,
			raw_materials_gs1_code,
			raw_materials_name,
			raw_materials_show_name,
			raw_materials_terminal,
			raw_materials_status,
			sale_flag,
			raw_materials_type,
			raw_materials_specification,
			raw_materials_specification_value,
			raw_materials_specification_unit_first,
			raw_materials_specification_unit_second,
			raw_materials_specification_unit_first_value,
			raw_materials_specification_unit_second_value,
			raw_materials_buy_unit_code,
			raw_materials_buy_unit_name,
			raw_materials_temperature_zone_code,
			raw_materials_temperature_zone_name,
			tax_rate_name,
			tax_rate_value,
			shelf_life,
			shelf_life_name,
			shelf_life_value,
			sale_date,
			sale_date_name,
			sale_date_value,
			create_date,
			create_user,
			last_update_date,
			last_update_user
		)
		VALUES
			(
				#{rawMaterialsCode,jdbcType=VARCHAR}, #{categoryCode,jdbcType=VARCHAR}, 
				#{rawMaterialsGs1Code,jdbcType=VARCHAR}, #{rawMaterialsName,jdbcType=VARCHAR}, #{rawMaterialsShowName,jdbcType=VARCHAR}, 
				#{rawMaterialsTerminal,jdbcType=DECIMAL}, #{rawMaterialsStatus,jdbcType=INTEGER}, #{saleFlag,jdbcType=INTEGER}, 
				#{rawMaterialsType,jdbcType=INTEGER}, #{rawMaterialsSpecification,jdbcType=VARCHAR}, 
				#{rawMaterialsSpecificationValue,jdbcType=FLOAT}, 
				#{rawMaterialsSpecificationUnitFirst,jdbcType=VARCHAR}, #{rawMaterialsSpecificationUnitSecond,jdbcType=VARCHAR},
				#{rawMaterialsSpecificationUnitFirstValue,jdbcType=VARCHAR}, #{rawMaterialsSpecificationUnitSecondValue,jdbcType=VARCHAR},
				#{rawMaterialsBuyUnitCode,jdbcType=VARCHAR},  #{rawMaterialsBuyUnitName,jdbcType=VARCHAR},
				#{rawMaterialsTemperatureZoneCode,jdbcType=VARCHAR},  #{rawMaterialsTemperatureZoneName,jdbcType=VARCHAR}, 
				#{taxRateName,jdbcType=VARCHAR},  #{taxRateValue,jdbcType=VARCHAR}, 
				#{shelfLife,jdbcType=INTEGER},  #{shelfLifeName,jdbcType=VARCHAR}, 
				#{shelfLifeValue,jdbcType=VARCHAR},  #{saleDate,jdbcType=INTEGER}, 
				#{saleDateName,jdbcType=VARCHAR},  #{saleDateValue,jdbcType=VARCHAR}, 
				#{createDate,jdbcType=TIMESTAMP}, #{createUser,jdbcType=VARCHAR}, #{lastUpdateDate,jdbcType=TIMESTAMP}, 
				#{lastUpdateUser,jdbcType=VARCHAR})
	</insert>
	<insert id="insertSelective" parameterType="com.spfood.pms.intf.domain.RawMaterials">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		insert into pms_raw_materials
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="id != null">
				id,
			</if>
			<if test="rawMaterialsCode != null">
				raw_materials_code,
			</if>
			<if test="categoryCode != null">
				category_code,
			</if>
			<if test="rawMaterialsGs1Code != null">
				raw_materials_gs1_code,
			</if>
			<if test="rawMaterialsName != null">
				raw_materials_name,
			</if>
			<if test="rawMaterialsShowName != null">
				raw_materials_show_name,
			</if>
			<if test="rawMaterialsTerminal != null">
				raw_materials_terminal,
			</if>
			<if test="rawMaterialsStatus != null">
				raw_materials_status,
			</if>
			<if test="saleFlag != null">
				sale_flag,
			</if>
			<if test="rawMaterialsType != null">
				raw_materials_type,
			</if>
			<if test="createDate != null">
				create_date,
			</if>
			<if test="createUser != null">
				create_user,
			</if>
			<if test="lastUpdateDate != null">
				last_update_date,
			</if>
			<if test="lastUpdateUser != null">
				last_update_user,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="id != null">
				#{id,jdbcType=BIGINT},
			</if>
			<if test="rawMaterialsCode != null">
				#{rawMaterialsCode,jdbcType=VARCHAR},
			</if>
			<if test="categoryCode != null">
				#{categoryCode,jdbcType=VARCHAR},
			</if>
			<if test="rawMaterialsGs1Code != null">
				#{rawMaterialsGs1Code,jdbcType=VARCHAR},
			</if>
			<if test="rawMaterialsName != null">
				#{rawMaterialsName,jdbcType=VARCHAR},
			</if>
			<if test="rawMaterialsShowName != null">
				#{rawMaterialsShowName,jdbcType=VARCHAR},
			</if>
			<if test="rawMaterialsTerminal != null">
				#{rawMaterialsTerminal,jdbcType=DECIMAL},
			</if>
			<if test="rawMaterialsStatus != null">
				#{rawMaterialsStatus,jdbcType=INTEGER},
			</if>
			<if test="saleFlag != null">
				#{saleFlag,jdbcType=INTEGER},
			</if>
			<if test="rawMaterialsType != null">
				#{rawMaterialsType,jdbcType=INTEGER},
			</if>
			<if test="createDate != null">
				#{createDate,jdbcType=TIMESTAMP},
			</if>
			<if test="createUser != null">
				#{createUser,jdbcType=VARCHAR},
			</if>
			<if test="lastUpdateDate != null">
				#{lastUpdateDate,jdbcType=TIMESTAMP},
			</if>
			<if test="lastUpdateUser != null">
				#{lastUpdateUser,jdbcType=VARCHAR},
			</if>
		</trim>
	</insert>
	<update id="updateByPrimaryKeySelective" parameterType="com.spfood.pms.intf.domain.RawMaterials">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		update pms_raw_materials
		    <set >
      <if test="rawMaterialsGs1Code != null" >
        raw_materials_gs1_code = #{rawMaterialsGs1Code,jdbcType=VARCHAR},
      </if>
      <if test="rawMaterialsName != null" >
        raw_materials_name = #{rawMaterialsName,jdbcType=VARCHAR},
      </if>
      <if test="rawMaterialsBuyUnitName != null" >
        raw_materials_buy_unit_name = #{rawMaterialsBuyUnitName,jdbcType=VARCHAR},
      </if>
      <if test="rawMaterialsBuyUnitCode != null" >
        raw_materials_buy_unit_code = #{rawMaterialsBuyUnitCode,jdbcType=VARCHAR},
      </if>
      <if test="taxRateName != null" >
        tax_rate_name = #{taxRateName,jdbcType=VARCHAR},
      </if>
      <if test="taxRateValue != null" >
        tax_rate_value = #{taxRateValue,jdbcType=VARCHAR},
      </if>
      <if test="shelfLife != null" >
        shelf_life = #{shelfLife,jdbcType=INTEGER},
      </if>
      <if test="shelfLifeName != null" >
        shelf_life_name = #{shelfLifeName,jdbcType=VARCHAR},
      </if>
      <if test="shelfLifeValue != null" >
        shelf_life_value = #{shelfLifeValue,jdbcType=VARCHAR},
      </if>
      <if test="saleDate != null" >
        sale_date = #{saleDate,jdbcType=INTEGER},
      </if>
      <if test="saleDateName != null" >
        sale_date_name = #{saleDateName,jdbcType=VARCHAR},
      </if>
      <if test="saleDateValue != null" >
        sale_date_value = #{saleDateValue,jdbcType=VARCHAR},
      </if>
      <if test="rawMaterialsShowName != null" >
        raw_materials_show_name = #{rawMaterialsShowName,jdbcType=VARCHAR},
      </if>
      <if test="rawMaterialsTerminal != null" >
        raw_materials_terminal = #{rawMaterialsTerminal,jdbcType=DECIMAL},
      </if>
      <if test="rawMaterialsStatus != null" >
        raw_materials_status = #{rawMaterialsStatus,jdbcType=INTEGER},
      </if>
      <if test="saleFlag != null" >
        sale_flag = #{saleFlag,jdbcType=INTEGER},
      </if>
      <if test="rawMaterialsType != null" >
        raw_materials_type = #{rawMaterialsType,jdbcType=INTEGER},
      </if>
      <if test="rawMaterialsSpecification != null" >
        raw_materials_specification = #{rawMaterialsSpecification,jdbcType=VARCHAR},
      </if>
      <if test="rawMaterialsSpecificationValue != null" >
        raw_materials_specification_value = #{rawMaterialsSpecificationValue,jdbcType=FLOAT},
      </if>
      <if test="rawMaterialsSpecificationUnitFirst != null" >
        raw_materials_specification_unit_first = #{rawMaterialsSpecificationUnitFirst,jdbcType=VARCHAR},
      </if>
      <if test="rawMaterialsSpecificationUnitSecond != null" >
        raw_materials_specification_unit_second = #{rawMaterialsSpecificationUnitSecond,jdbcType=VARCHAR},
      </if>
      <if test="rawMaterialsSpecificationUnitFirstValue != null" >
        raw_materials_specification_unit_first_value = #{rawMaterialsSpecificationUnitFirstValue,jdbcType=VARCHAR},
      </if>
      <if test="rawMaterialsSpecificationUnitSecondValue != null" >
        raw_materials_specification_unit_second_value = #{rawMaterialsSpecificationUnitSecondValue,jdbcType=VARCHAR},
      </if>
      <if test="rawMaterialsSpecificationUnitFirstValue != null" >
        raw_materials_buy_unit_code = #{rawMaterialsBuyUnitCode,jdbcType=VARCHAR},
      </if>
      <if test="rawMaterialsSpecificationUnitSecondValue != null" >
        raw_materials_buy_unit_name = #{rawMaterialsBuyUnitName,jdbcType=VARCHAR},
      </if>
      <if test="lastUpdateDate != null" >
        last_update_date = #{lastUpdateDate,jdbcType=TIMESTAMP},
      </if>
      <if test="lastUpdateUser != null" >
        last_update_user = #{lastUpdateUser,jdbcType=VARCHAR},
      </if>
    </set>
		where id = #{id,jdbcType=BIGINT}
	</update>

	<delete id="delete" parameterType="com.spfood.pms.intf.domain.RawMaterials">
		delete from pms_raw_materials
		<include refid="Base_Where_Case" />
	</delete>
	
		<select id="selectPaclUnitListByRawMaterialsCodes" resultMap="BaseResultMap"
		parameterType="java.util.List">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		SELECT
			a.id,
			a.raw_materials_code,
			a.raw_materials_buy_unit_name,
			a.raw_materials_buy_unit_code,
			b.id as pack_unit_id,
			b.raw_materials_code as pack_unit_raw_materials_code,
			b.unit_code,
			b.unit_name,
			b.unit_value
		FROM
			pms_raw_materials a
		LEFT JOIN pms_raw_materials_pack_unit b ON a.raw_materials_code = b.raw_materials_code
		WHERE
			a.raw_materials_code IN
		<foreach item="item" index="index" collection="list" open="("
			separator="," close=")">
			#{item}
		</foreach>
		ORDER BY
		a.raw_materials_code ASC
	</select>

		<select id="selectProducePlaceByRawMaterialsCodes" resultMap="BaseResultMap"
		parameterType="java.util.List">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		SELECT
			pms_raw_materials.id,
			pms_raw_materials.raw_materials_code,
			pms_raw_materials.raw_materials_temperature_zone_name,
			pms_raw_materials.raw_materials_temperature_zone_code,
			pms_raw_materials_property.id,
			pms_raw_materials_property.raw_materials_property_name,
			pms_raw_materials_property.raw_materials_property_value
		FROM
			pms_raw_materials
		LEFT JOIN pms_raw_materials_property ON pms_raw_materials.raw_materials_code = pms_raw_materials_property.raw_materials_code
		WHERE
			(
			pms_raw_materials_property.raw_materials_property_name = '产地'
			OR pms_raw_materials_property.raw_materials_property_name = '重量'
			)
		<if test="list != null" >
		AND pms_raw_materials.raw_materials_code IN
		<foreach item="item" index="index" collection="list" open="("
			separator="," close=")">
			#{item}
		</foreach>
		</if>
		ORDER BY
		pms_raw_materials.raw_materials_code ASC
	</select>

	<select id="selectPageForWMS" resultMap="BaseResultMap"
		parameterType="java.util.List">
		
		SELECT
			rawMaterials.*, pms_product_category.category_name,
			packunit.unit_code,
			packunit.unit_name,
			packunit.unit_value
		FROM
			pms_raw_materials AS rawMaterials
		LEFT JOIN pms_raw_materials_pack_unit AS packunit ON rawMaterials.raw_materials_code = packunit.raw_materials_code
		LEFT JOIN pms_product_category ON rawMaterials.category_code = pms_product_category.category_code
		WHERE
			rawMaterials.id IN
		<foreach item="item" index="index" collection="list" open="("
			separator="," close=")">
			#{item}
		</foreach>
		ORDER BY
			rawMaterials.create_date DESC
	</select>
	
	
	<!-- 分页查询基础信息开始 -->
	<select id="selectCountForWMS" resultType="java.lang.Long"
		parameterType="com.spfood.pms.intf.domain.RawMaterials">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		select count(DISTINCT rawMaterials.id)
		from pms_raw_materials rawMaterials
		left join
		pms_raw_materials_property property
		on rawMaterials.raw_materials_code =
		property.raw_materials_code
		left join pms_product_category 
		on rawMaterials.category_code = pms_product_category.category_code 
		where 1= 1
		<if test="categoryCode != null">
			and rawMaterials.category_code like #{categoryCode,jdbcType=VARCHAR}
		</if>
		<if test="rawMaterialsCode != null">
			and rawMaterials.raw_materials_code like #{rawMaterialsCode,jdbcType=VARCHAR}
		</if>
		<if test="rawMaterialsBuyUnitCode == 'true'">
			and rawMaterials.raw_materials_buy_unit_code is not null
		</if>
		<if test="rawMaterialsBuyUnitCode == 'false'">
			and rawMaterials.raw_materials_buy_unit_code is null
		</if>
		<if test="rawMaterialsName != null">
			and rawMaterials.raw_materials_name like #{rawMaterialsName,jdbcType=VARCHAR}
		</if>
		<if test="rawMaterialsType != null">
			and rawMaterials.raw_materials_type = #{rawMaterialsType,jdbcType=VARCHAR}
		</if>
		<if test="saleFlag != null">
			and rawMaterials.sale_flag = #{saleFlag,jdbcType=VARCHAR}
		</if>
		<if test="category != null and category.categoryName != null">
			and pms_product_category.category_name like #{category.categoryName,jdbcType=VARCHAR}
		</if>
		<if test="propertySearchCriteria != null">
			and property.raw_materials_property_name = #{propertySearchCriteria.rawMaterialsPropertyName}
			and	property.raw_materials_property_value= #{propertySearchCriteria.rawMaterialsPropertyValue}
		</if>
	</select>


	<select id="selectBaseForWMS" resultType="com.spfood.pms.intf.domain.RawMaterials"
		parameterType="com.spfood.pms.intf.domain.RawMaterials">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		select DISTINCT rawMaterials.id
		from pms_raw_materials rawMaterials
		left join
		pms_raw_materials_property property
		on rawMaterials.raw_materials_code = property.raw_materials_code
		left join pms_product_category 
		on rawMaterials.category_code = pms_product_category.category_code 
		where 1=1 
		<if test="categoryCode != null">
			and rawMaterials.category_code like #{categoryCode,jdbcType=VARCHAR}
		</if>
		<if test="rawMaterialsCode != null">
			and rawMaterials.raw_materials_code like #{rawMaterialsCode,jdbcType=VARCHAR}
		</if>
		<if test="rawMaterialsBuyUnitCode == 'true'">
			and rawMaterials.raw_materials_buy_unit_code is not null
		</if>
		<if test="rawMaterialsBuyUnitCode == 'false'">
			and rawMaterials.raw_materials_buy_unit_code is null
		</if>
		<if test="rawMaterialsName != null">
			and rawMaterials.raw_materials_name like #{rawMaterialsName,jdbcType=VARCHAR}
		</if>
		<if test="rawMaterialsType != null">
			and rawMaterials.raw_materials_type = #{rawMaterialsType,jdbcType=VARCHAR}
		</if>
		<if test="saleFlag != null">
			and rawMaterials.sale_flag = #{saleFlag,jdbcType=VARCHAR}
		</if>
		<if test="category != null and category.categoryName != null">
			and pms_product_category.category_name like #{category.categoryName,jdbcType=VARCHAR}
		</if>
		<if test="propertySearchCriteria != null">
			and property.raw_materials_property_name = #{propertySearchCriteria.rawMaterialsPropertyName}
			and	property.raw_materials_property_value= #{propertySearchCriteria.rawMaterialsPropertyValue}
		</if>
		order by rawMaterials.id desc
	</select>
	<!-- 分页查询基础信息结束 -->

</mapper>