<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.spfood.pms.intf.domain.Product">
	<resultMap id="BaseResultMap" type="com.spfood.pms.intf.domain.Product">
		<!-- WARNING - @mbggenerated This element is automatically generated by
			MyBatis Generator, do not modify. -->
	    <id column="id" property="id" jdbcType="BIGINT" />
	    <result column="product_code" property="productCode" jdbcType="VARCHAR" />
	    <result column="category_code" property="categoryCode" jdbcType="VARCHAR" />
	    <result column="product_gs1_code" property="productGs1Code" jdbcType="VARCHAR" />
	    <result column="product_name" property="productName" jdbcType="VARCHAR" />
	    <result column="product_buy_unit_name" property="productBuyUnitName" jdbcType="VARCHAR" />
	    <result column="product_buy_unit_code" property="productBuyUnitCode" jdbcType="VARCHAR" />
	    <result column="product_temperature_zone_name" property="productTemperatureZoneName" jdbcType="VARCHAR" />
	    <result column="product_temperature_zone_code" property="productTemperatureZoneCode" jdbcType="VARCHAR" />
	    <result column="product_show_name" property="productShowName" jdbcType="VARCHAR" />
	    <result column="product_terminal" property="productTerminal" jdbcType="DECIMAL" />
	    <result column="product_status" property="productStatus" jdbcType="INTEGER" />
	    <result column="sale_flag" property="saleFlag" jdbcType="INTEGER" />
	    <result column="composite_flag" property="compositeFlag" jdbcType="INTEGER" />
	    <result column="product_specification_value" property="productSpecificationValue" jdbcType="FLOAT" />
	    <result column="product_specification_unit_first" property="productSpecificationUnitFirst" jdbcType="VARCHAR" />
	    <result column="product_specification_unit_second" property="productSpecificationUnitSecond" jdbcType="VARCHAR" />
	    <!-- add value start -->
	    <result column="product_specification_unit_first_value" property="productSpecificationUnitFirstValue" jdbcType="VARCHAR" />
	    <result column="product_specification_unit_second_value" property="productSpecificationUnitSecondValue" jdbcType="VARCHAR" />
	    <!-- add value end -->
		<result column="create_date" property="createDate" jdbcType="TIMESTAMP" />
		<result column="create_user" property="createUser" jdbcType="VARCHAR" />
		<result column="last_update_date" property="lastUpdateDate"
			jdbcType="TIMESTAMP" />
		<result column="last_update_user" property="lastUpdateUser"
			jdbcType="VARCHAR" />
		<collection property="productProperties"
			ofType="com.spfood.pms.intf.domain.ProductProperty" column="product_code">
			<id column="property_id" property="id" jdbcType="BIGINT" />
			<result column="property_product_code" property="productCode"
				jdbcType="VARCHAR" />
			<result column="product_property_name" property="productPropertyName"
				jdbcType="VARCHAR" />
			<result column="product_property_value" property="productPropertyValue"
				jdbcType="VARCHAR" />
			<result column="customer_define_flag" property="customerDefineFlag" jdbcType="INTEGER" />
		</collection>
		<collection property="productPackUnit"
			ofType="com.spfood.pms.intf.domain.ProductPackUnit" resultMap="PackUnitMap"/>
		<collection property="category"
			ofType="com.spfood.pms.intf.domain.ProductCategory" column="category_code">
			<id column="ProductCategory_id" property="id" jdbcType="BIGINT" />
		    <result column="category_code" property="categoryCode" jdbcType="VARCHAR" />
		    <result column="category_name" property="categoryName" jdbcType="VARCHAR" />
		    <result column="category_another_name" property="categoryAnotherName" jdbcType="VARCHAR"/>
		    <result column="parent_category_code" property="parentCategory.categoryCode" jdbcType="VARCHAR" />
		    <result column="parent_category_name" property="parentCategory.categoryName" jdbcType="VARCHAR" />
		    <result column="category_comment" property="categoryComment" jdbcType="VARCHAR" />
		</collection>
	</resultMap>
	 <resultMap id="PackUnitMap" type="com.spfood.pms.intf.domain.ProductPackUnit">
			<id column="pack_unit_id" property="id" jdbcType="BIGINT" />
			<result column="pack_unit_product_code" property="productCode" jdbcType="VARCHAR" />
			<result column="unit_name" property="unitName" jdbcType="VARCHAR" />
			<result column="unit_code" property="unitCode" jdbcType="VARCHAR" />
			<result column="unit_value" property="unitValue" jdbcType="INTEGER" />
	 </resultMap>
	<sql id="Base_Column_List">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
    id, product_code, category_code, product_gs1_code, product_name, product_show_name,product_buy_unit_name,
    product_buy_unit_code, 
    product_terminal, product_status, sale_flag, composite_flag, product_specification_value, 
    product_specification_unit_first, product_specification_unit_second, 
    product_specification_unit_first_value,product_specification_unit_second_value
    create_date, 
    create_user, last_update_date, last_update_user
	</sql>
	<sql id="Casecade_Where_Case">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		<where>
			<if test="id != null">
				AND product.id = #{id,jdbcType=BIGINT}
			</if>
			<if test="productCode != null">
				AND product.product_code =
				#{productCode,jdbcType=VARCHAR}
			</if>
			<if test="categoryCode != null">
				AND category_code = #{categoryCode,jdbcType=VARCHAR}
			</if>
			<if test="productGs1Code != null">
				AND product_gs1_code = #{productGs1Code,jdbcType=VARCHAR}
			</if>
			<if test="productName != null">
				AND product_name = #{productName,jdbcType=VARCHAR}
			</if>
			<if test="productShowName != null">
				AND product_show_name =
				#{productShowName,jdbcType=VARCHAR}
			</if>
			<if test="productTerminal != null">
				AND product_terminal =
				#{productTerminal,jdbcType=DECIMAL}
			</if>
			<if test="productStatus != null">
				AND product_status = #{productStatus,jdbcType=INTEGER}
			</if>
			<if test="saleFlag != null">
				AND sale_flag = #{saleFlag,jdbcType=INTEGER}
			</if>
			<if test="compositeFlag != null">
				AND composite_flag = #{compositeFlag,jdbcType=INTEGER}
			</if>
			<if test="propertySearchCriteria != null">
			and property.product_property_name = #{propertySearchCriteria.productPropertyName}
			and	property.product_property_value= #{propertySearchCriteria.productPropertyValue}
		</if>
		</where>
	</sql>

	<sql id="Base_Where_Case" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <where >
      <if test="id != null" >
         AND id = #{id,jdbcType=BIGINT}
      </if>
      <if test="productCode != null" >
         AND product_code = #{productCode,jdbcType=VARCHAR}
      </if>
      <if test="categoryCode != null" >
         AND category_code = #{categoryCode,jdbcType=VARCHAR}
      </if>
      <if test="productGs1Code != null" >
         AND product_gs1_code = #{productGs1Code,jdbcType=VARCHAR}
      </if>
      <if test="productName != null" >
         AND product_name = #{productName,jdbcType=VARCHAR}
      </if>
      <if test="productShowName != null" >
         AND product_show_name = #{productShowName,jdbcType=VARCHAR}
      </if>
      <if test="productTerminal != null" >
         AND product_terminal = #{productTerminal,jdbcType=DECIMAL}
      </if>
      <if test="productStatus != null" >
         AND product_status = #{productStatus,jdbcType=INTEGER}
      </if>
      <if test="saleFlag != null" >
         AND sale_flag = #{saleFlag,jdbcType=INTEGER}
      </if>
      <if test="compositeFlag != null" >
         AND composite_flag = #{compositeFlag,jdbcType=INTEGER}
      </if>
      <if test="productSpecificationValue != null" >
         AND product_specification_value = #{productSpecificationValue,jdbcType=FLOAT}
      </if>
      <if test="productSpecificationUnitFirst != null" >
         AND product_specification_unit_first = #{productSpecificationUnitFirst,jdbcType=VARCHAR}
      </if>
      <if test="productSpecificationUnitSecond != null" >
         AND product_specification_unit_second = #{productSpecificationUnitSecond,jdbcType=VARCHAR}
      </if>
      <if test="productSpecificationUnitFirstValue != null" >
         AND product_specification_unit_first_value = #{productSpecificationUnitFirstValue,jdbcType=VARCHAR}
      </if>
      <if test="productSpecificationUnitSecondValue != null" >
         AND product_specification_unit_second_value = #{productSpecificationUnitSecondValue,jdbcType=VARCHAR}
      </if>
    </where>
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="com.spfood.pms.intf.domain.Product">
      
      select 
      <include refid="Base_Column_List" />
    from pms_product
    where id = #{id,jdbcType=BIGINT}
  </select>

	<!-- 分页查询基础信息开始 -->
	<select id="selectCount" resultType="java.lang.Long"
		parameterType="com.spfood.pms.intf.domain.Product">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		select count(DISTINCT product.id)
		from pms_product product
		left join
		pms_product_property property
		on product.product_code =
		property.product_code
		left join pms_product_category 
		on product.category_code = pms_product_category.category_code 
		where 1= 1
		<if test="categoryCode != null">
			and product.category_code = #{categoryCode,jdbcType=VARCHAR}
		</if>
		<if test="productCode != null">
			and product.product_code like #{productCode,jdbcType=VARCHAR}
		</if>
		<if test="productBuyUnitCode == 'true'">
			and product.product_buy_unit_code is not null
		</if>
		<if test="productBuyUnitCode == 'false'">
			and product.product_buy_unit_code is null
		</if>
		<if test="productName != null">
			and product.product_name like #{productName,jdbcType=VARCHAR}
		</if>
		<if test="compositeFlag != null">
			and product.composite_flag = #{compositeFlag,jdbcType=VARCHAR}
		</if>
		<if test="saleFlag != null">
			and product.sale_flag = #{saleFlag,jdbcType=VARCHAR}
		</if>
		<if test="category != null and category.categoryName != null">
			and pms_product_category.category_name like #{category.categoryName,jdbcType=VARCHAR}
		</if>
		<if test="propertySearchCriteria != null">
			and property.product_property_name = #{propertySearchCriteria.productPropertyName}
			and	property.product_property_value= #{propertySearchCriteria.productPropertyValue}
		</if>
	</select>


	<select id="selectBase" resultType="com.spfood.pms.intf.domain.Product"
		parameterType="com.spfood.pms.intf.domain.Product">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		select DISTINCT product.id
		from pms_product product
		left join
		pms_product_property property
		on product.product_code = property.product_code
		left join pms_product_category 
		on product.category_code = pms_product_category.category_code 
		where 1=1 
		<if test="categoryCode != null">
			and product.category_code = #{categoryCode,jdbcType=VARCHAR}
		</if>
		<if test="productCode != null">
			and product.product_code like #{productCode,jdbcType=VARCHAR}
		</if>
		<if test="productBuyUnitCode == 'true'">
			and product.product_buy_unit_code is not null
		</if>
		<if test="productBuyUnitCode == 'false'">
			and product.product_buy_unit_code is null
		</if>
		<if test="productName != null">
			and product.product_name like #{productName,jdbcType=VARCHAR}
		</if>
		<if test="compositeFlag != null">
			and product.composite_flag = #{compositeFlag,jdbcType=VARCHAR}
		</if>
		<if test="saleFlag != null">
			and product.sale_flag = #{saleFlag,jdbcType=VARCHAR}
		</if>
		<if test="category != null and category.categoryName != null">
			and pms_product_category.category_name like #{category.categoryName,jdbcType=VARCHAR}
		</if>
		<if test="propertySearchCriteria != null">
			and property.product_property_name = #{propertySearchCriteria.productPropertyName}
			and	property.product_property_value= #{propertySearchCriteria.productPropertyValue}
		</if>
		order by product.id desc
	</select>
	<!-- 分页查询基础信息结束 -->

	<select id="select" resultMap="BaseResultMap"
		parameterType="com.spfood.pms.intf.domain.Product">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		SELECT
			product.*, product_property_name,
			product_property_value,
			property.id AS property_id,
			property.product_code property_product_code,
			property.customer_define_flag
		FROM
			pms_product product
		LEFT JOIN pms_product_property property ON product.product_code = property.product_code
		WHERE
			product.id IN (
				SELECT
					product.id
				FROM
					pms_product product
				LEFT JOIN pms_product_property property ON product.product_code = property.product_code
				<include refid="Casecade_Where_Case" />
				ORDER BY
					product.create_date DESC
		)
		ORDER BY
			product.create_date DESC
	</select>
	
		<select id="selectByProductCode" resultMap="BaseResultMap"
		parameterType="com.spfood.pms.intf.domain.Product">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		SELECT
			product.*
		FROM
			pms_product product
		WHERE
			product_code = #{productCode,jdbcType=VARCHAR}
	</select>
	<select id="selectGS1IsExist" resultType="java.lang.Boolean" parameterType="com.spfood.pms.intf.domain.Product">
	      select CASE when count(id)>0 then false else true end as checkResult 
       from pms_product where product_gs1_code = #{productGs1Code,jdbcType=VARCHAR}
       <if test="id != null" >
          and id != #{id,jdbcType=BIGINT}
      </if>
	</select>
	<select id="selectListByIds" resultMap="BaseResultMap"
		parameterType="java.util.List">
		
		select product.*,pms_product_category.category_name,
		product_property_name, product_property_value,product_buy_unit_name,product_buy_unit_code,
		property.id as property_id, property.product_code property_product_code,
		property.customer_define_flag
		from pms_product
		product
		 
		left join
		pms_product_property property
		on
		product.product_code =
		property.product_code
		LEFT JOIN pms_product_category
		ON product.category_code = pms_product_category.category_code
		where product.id in

		<foreach item="item" index="index" collection="list" open="("
			separator="," close=")">
			#{item}
		</foreach>
		order by product.create_date desc
	</select>
	
	<!-- 可以返回二级品类名和编码 -->
	<select id="selectListByIdsSecond" resultMap="BaseResultMap"
		parameterType="java.util.List">
		
		select product.*,category.category_name parent_category_name,pms_product_category.category_name,pms_product_category.parent_category_code,
		product_property_name, product_property_value,product_buy_unit_name,product_buy_unit_code,
		property.id as property_id, property.product_code property_product_code,
		property.customer_define_flag
		from pms_product
		product
		
		left join
		pms_product_property property
		on
		product.product_code =
		property.product_code
		LEFT JOIN pms_product_category
		ON product.category_code = pms_product_category.category_code
		
		join pms_product_category category on pms_product_category.parent_category_code = category.category_code
		where product.id in

		<foreach item="item" index="index" collection="list" open="("
			separator="," close=")">
			#{item}
		</foreach>
		order by product.create_date desc
	</select>

	<insert id="insert" parameterType="com.spfood.pms.intf.domain.Product"
	        useGeneratedKeys="true" keyProperty="id">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		INSERT INTO pms_product (
			product_code,
			category_code,
			product_gs1_code,
			product_name,
			product_show_name,
			product_terminal,
			product_status,
			sale_flag,
			composite_flag,
			product_specification_value,
			product_specification_unit_first,
			product_specification_unit_second,
			product_specification_unit_first_value,
			product_specification_unit_second_value,
			product_buy_unit_code,
			product_buy_unit_name,
			product_temperature_zone_code,
			product_temperature_zone_name,
			create_date,
			create_user,
			last_update_date,
			last_update_user
		)
		VALUES
			(
				#{productCode,jdbcType=VARCHAR}, #{categoryCode,jdbcType=VARCHAR}, 
				#{productGs1Code,jdbcType=VARCHAR}, #{productName,jdbcType=VARCHAR}, #{productShowName,jdbcType=VARCHAR}, 
				#{productTerminal,jdbcType=DECIMAL}, #{productStatus,jdbcType=INTEGER}, #{saleFlag,jdbcType=INTEGER}, 
				#{compositeFlag,jdbcType=INTEGER}, #{productSpecificationValue,jdbcType=FLOAT}, 
				#{productSpecificationUnitFirst,jdbcType=VARCHAR}, #{productSpecificationUnitSecond,jdbcType=VARCHAR},
				#{productSpecificationUnitFirstValue,jdbcType=VARCHAR}, #{productSpecificationUnitSecondValue,jdbcType=VARCHAR},
				#{productBuyUnitCode,jdbcType=VARCHAR},  #{productBuyUnitName,jdbcType=VARCHAR},
				#{productTemperatureZoneCode,jdbcType=VARCHAR},  #{productTemperatureZoneName,jdbcType=VARCHAR}, 
				#{createDate,jdbcType=TIMESTAMP}, #{createUser,jdbcType=VARCHAR}, #{lastUpdateDate,jdbcType=TIMESTAMP}, 
				#{lastUpdateUser,jdbcType=VARCHAR})
	</insert>
	<insert id="insertSelective" parameterType="com.spfood.pms.intf.domain.Product">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		insert into pms_product
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="id != null">
				id,
			</if>
			<if test="productCode != null">
				product_code,
			</if>
			<if test="categoryCode != null">
				category_code,
			</if>
			<if test="productGs1Code != null">
				product_gs1_code,
			</if>
			<if test="productName != null">
				product_name,
			</if>
			<if test="productShowName != null">
				product_show_name,
			</if>
			<if test="productTerminal != null">
				product_terminal,
			</if>
			<if test="productStatus != null">
				product_status,
			</if>
			<if test="saleFlag != null">
				sale_flag,
			</if>
			<if test="compositeFlag != null">
				composite_flag,
			</if>
			<if test="createDate != null">
				create_date,
			</if>
			<if test="createUser != null">
				create_user,
			</if>
			<if test="lastUpdateDate != null">
				last_update_date,
			</if>
			<if test="lastUpdateUser != null">
				last_update_user,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="id != null">
				#{id,jdbcType=BIGINT},
			</if>
			<if test="productCode != null">
				#{productCode,jdbcType=VARCHAR},
			</if>
			<if test="categoryCode != null">
				#{categoryCode,jdbcType=VARCHAR},
			</if>
			<if test="productGs1Code != null">
				#{productGs1Code,jdbcType=VARCHAR},
			</if>
			<if test="productName != null">
				#{productName,jdbcType=VARCHAR},
			</if>
			<if test="productShowName != null">
				#{productShowName,jdbcType=VARCHAR},
			</if>
			<if test="productTerminal != null">
				#{productTerminal,jdbcType=DECIMAL},
			</if>
			<if test="productStatus != null">
				#{productStatus,jdbcType=INTEGER},
			</if>
			<if test="saleFlag != null">
				#{saleFlag,jdbcType=INTEGER},
			</if>
			<if test="compositeFlag != null">
				#{compositeFlag,jdbcType=INTEGER},
			</if>
			<if test="createDate != null">
				#{createDate,jdbcType=TIMESTAMP},
			</if>
			<if test="createUser != null">
				#{createUser,jdbcType=VARCHAR},
			</if>
			<if test="lastUpdateDate != null">
				#{lastUpdateDate,jdbcType=TIMESTAMP},
			</if>
			<if test="lastUpdateUser != null">
				#{lastUpdateUser,jdbcType=VARCHAR},
			</if>
		</trim>
	</insert>
	<update id="updateByPrimaryKeySelective" parameterType="com.spfood.pms.intf.domain.Product">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		update pms_product
		    <set >
      <if test="productGs1Code != null" >
        product_gs1_code = #{productGs1Code,jdbcType=VARCHAR},
      </if>
      <if test="productName != null" >
        product_name = #{productName,jdbcType=VARCHAR},
      </if>
      <if test="productBuyUnitName != null" >
        product_buy_unit_name = #{productBuyUnitName,jdbcType=VARCHAR},
      </if>
      <if test="productBuyUnitCode != null" >
        product_buy_unit_code = #{productBuyUnitCode,jdbcType=VARCHAR},
      </if>
      <if test="productShowName != null" >
        product_show_name = #{productShowName,jdbcType=VARCHAR},
      </if>
      <if test="productTerminal != null" >
        product_terminal = #{productTerminal,jdbcType=DECIMAL},
      </if>
      <if test="productStatus != null" >
        product_status = #{productStatus,jdbcType=INTEGER},
      </if>
      <if test="saleFlag != null" >
        sale_flag = #{saleFlag,jdbcType=INTEGER},
      </if>
      <if test="compositeFlag != null" >
        composite_flag = #{compositeFlag,jdbcType=INTEGER},
      </if>
      <if test="productSpecificationValue != null" >
        product_specification_value = #{productSpecificationValue,jdbcType=FLOAT},
      </if>
      <if test="productSpecificationUnitFirst != null" >
        product_specification_unit_first = #{productSpecificationUnitFirst,jdbcType=VARCHAR},
      </if>
      <if test="productSpecificationUnitSecond != null" >
        product_specification_unit_second = #{productSpecificationUnitSecond,jdbcType=VARCHAR},
      </if>
      <if test="productSpecificationUnitFirstValue != null" >
        product_specification_unit_first_value = #{productSpecificationUnitFirstValue,jdbcType=VARCHAR},
      </if>
      <if test="productSpecificationUnitSecondValue != null" >
        product_specification_unit_second_value = #{productSpecificationUnitSecondValue,jdbcType=VARCHAR},
      </if>
      <if test="productSpecificationUnitFirstValue != null" >
        product_buy_unit_code = #{productBuyUnitCode,jdbcType=VARCHAR},
      </if>
      <if test="productSpecificationUnitSecondValue != null" >
        product_buy_unit_name = #{productBuyUnitName,jdbcType=VARCHAR},
      </if>
      <if test="lastUpdateDate != null" >
        last_update_date = #{lastUpdateDate,jdbcType=TIMESTAMP},
      </if>
      <if test="lastUpdateUser != null" >
        last_update_user = #{lastUpdateUser,jdbcType=VARCHAR},
      </if>
    </set>
		where id = #{id,jdbcType=BIGINT}
	</update>

	<delete id="delete" parameterType="com.spfood.pms.intf.domain.Product">
		delete from pms_product
		<include refid="Base_Where_Case" />
	</delete>
	
		<select id="selectPaclUnitListByProductCodes" resultMap="BaseResultMap"
		parameterType="java.util.List">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		SELECT
			a.id,
			a.product_code,
			a.product_buy_unit_name,
			a.product_buy_unit_code,
			b.id as pack_unit_id,
			b.product_code as pack_unit_product_code,
			b.unit_code,
			b.unit_name,
			b.unit_value
		FROM
			pms_product a
		LEFT JOIN pms_pack_unit b ON a.product_code = b.product_code
		WHERE
			a.product_code IN
		<foreach item="item" index="index" collection="list" open="("
			separator="," close=")">
			#{item}
		</foreach>
		ORDER BY
		a.product_code ASC
	</select>

		<select id="selectProducePlaceByProductCodes" resultMap="BaseResultMap"
		parameterType="java.util.List">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		SELECT
			pms_product.id,
			pms_product.product_code,
			pms_product.product_temperature_zone_name,
			pms_product.product_temperature_zone_code,
			pms_product_property.id,
			pms_product_property.product_property_name,
			pms_product_property.product_property_value
		FROM
			pms_product
		LEFT JOIN pms_product_property ON pms_product.product_code = pms_product_property.product_code
		WHERE
			(
			pms_product_property.product_property_name = '产地'
			OR pms_product_property.product_property_name = '重量'
			)
		<if test="list != null" >
		AND pms_product.product_code IN
		<foreach item="item" index="index" collection="list" open="("
			separator="," close=")">
			#{item}
		</foreach>
		</if>
		ORDER BY
		pms_product.product_code ASC
	</select>

	<select id="selectPageForWMS" resultMap="BaseResultMap"
		parameterType="java.util.List">
		
		SELECT
			product.*, pms_product_category.category_name,
			packunit.unit_code,
			packunit.unit_name,
			packunit.unit_value
		FROM
			pms_product AS product
		LEFT JOIN pms_pack_unit AS packunit ON product.product_code = packunit.product_code
		LEFT JOIN pms_product_category ON product.category_code = pms_product_category.category_code
		WHERE
			product.id IN
		<foreach item="item" index="index" collection="list" open="("
			separator="," close=")">
			#{item}
		</foreach>
		ORDER BY
			product.create_date DESC
	</select>
	
	
	<!-- 分页查询基础信息开始 -->
	<select id="selectCountForWMS" resultType="java.lang.Long"
		parameterType="com.spfood.pms.intf.domain.Product">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		select count(DISTINCT product.id)
		from pms_product product
		left join
		pms_product_property property
		on product.product_code =
		property.product_code
		left join pms_product_category 
		on product.category_code = pms_product_category.category_code 
		where 1= 1
		<if test="categoryCode != null">
			and product.category_code like #{categoryCode,jdbcType=VARCHAR}
		</if>
		<if test="productCode != null">
			and product.product_code like #{productCode,jdbcType=VARCHAR}
		</if>
		<if test="productBuyUnitCode == 'true'">
			and product.product_buy_unit_code is not null
		</if>
		<if test="productBuyUnitCode == 'false'">
			and product.product_buy_unit_code is null
		</if>
		<if test="productName != null">
			and product.product_name like #{productName,jdbcType=VARCHAR}
		</if>
		<if test="compositeFlag != null">
			and product.composite_flag = #{compositeFlag,jdbcType=VARCHAR}
		</if>
		<if test="saleFlag != null">
			and product.sale_flag = #{saleFlag,jdbcType=VARCHAR}
		</if>
		<if test="category != null and category.categoryName != null">
			and pms_product_category.category_name like #{category.categoryName,jdbcType=VARCHAR}
		</if>
		<if test="propertySearchCriteria != null">
			and property.product_property_name = #{propertySearchCriteria.productPropertyName}
			and	property.product_property_value= #{propertySearchCriteria.productPropertyValue}
		</if>
	</select>


	<select id="selectBaseForWMS" resultType="com.spfood.pms.intf.domain.Product"
		parameterType="com.spfood.pms.intf.domain.Product">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		select DISTINCT product.id
		from pms_product product
		left join
		pms_product_property property
		on product.product_code = property.product_code
		left join pms_product_category 
		on product.category_code = pms_product_category.category_code 
		where 1=1 
		<if test="categoryCode != null">
			and product.category_code like #{categoryCode,jdbcType=VARCHAR}
		</if>
		<if test="productCode != null">
			and product.product_code like #{productCode,jdbcType=VARCHAR}
		</if>
		<if test="productBuyUnitCode == 'true'">
			and product.product_buy_unit_code is not null
		</if>
		<if test="productBuyUnitCode == 'false'">
			and product.product_buy_unit_code is null
		</if>
		<if test="productName != null">
			and product.product_name like #{productName,jdbcType=VARCHAR}
		</if>
		<if test="compositeFlag != null">
			and product.composite_flag = #{compositeFlag,jdbcType=VARCHAR}
		</if>
		<if test="saleFlag != null">
			and product.sale_flag = #{saleFlag,jdbcType=VARCHAR}
		</if>
		<if test="category != null and category.categoryName != null">
			and pms_product_category.category_name like #{category.categoryName,jdbcType=VARCHAR}
		</if>
		<if test="propertySearchCriteria != null">
			and property.product_property_name = #{propertySearchCriteria.productPropertyName}
			and	property.product_property_value= #{propertySearchCriteria.productPropertyValue}
		</if>
		order by product.id desc
	</select>
	<!-- 分页查询基础信息结束 -->
</mapper>